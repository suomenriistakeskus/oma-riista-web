<form name="deerCensusForm" role="form" class="form form-horizontal" autocomplete="off"
      r-force-show-errors-check-validity>

    <div class="modal-header">
        <h3 class="modal-title" translate="club.deerCensus.form.title"></h3>
    </div>

    <div class="modal-body" style="min-height: 400px;">
        <fieldset>
            <div class="permit-application-wizard-container">
                <div class="alert alert-info wizard-info">
                    <span class="fa fa-info-circle"></span>
                    <div class="alert-content">
                        <span translate="club.deerCensus.form.infoText"></span>
                        <a href="https://riista.fi/riistatalous/riistakantojen-verotuksen-suunnittelu/pienten-hirvielainten-verotus/"
                           target="_blank">
                            https://riista.fi/riistatalous/riistakantojen-verotuksen-suunnittelu/pienten-hirvielainten-verotus/
                        </a>
                    </div>
                </div>
            </div>
            <div class="h4">
                <span translate="club.deerCensus.form.estimatedPopulation"></span>
            </div>

            <div class="row">
                <div class="col-md-6 col-xs-12">
                    <div class="form-group" show-errors>
                        <label for="whiteTailDeers" class="control-label col-xs-6">
                            <span translate="club.deerCensus.form.whiteTailDeers"></span>
                        </label>
                        <div class="col-xs-6">
                            <div class="input-group">
                                <input type="number" name="whiteTailDeers" id="whiteTailDeers"
                                       min="0" max="99999" step="1"
                                       class="form-control no-spinner"
                                       ng-disabled="!$ctrl.isEditAllowed"
                                       ng-model="$ctrl.deerCensus.whiteTailDeers"/>
                                <span class="input-group-addon" translate="global.pcs"></span>
                            </div>
                            <p class="help-block has-error"
                               ng-show="deerCensusForm.whiteTailDeers.$invalid"
                               ng-messages="deerCensusForm.whiteTailDeers.$error">
                                <span ng-messages-include="common/errorMessages.html"></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div class="form-group">
                        <label for="whiteTailDeersAdditionalInfo" class="control-label col-md-3 col-xs-6">
                            <span translate="club.deerCensus.form.additionalInfo"></span>
                        </label>
                        <div class="col-xs-6">
                            <textarea name="whiteTailDeersAdditionalInfo"
                                      id="whiteTailDeersAdditionalInfo"
                                      class="form-control"
                                      ng-disabled="!$ctrl.isEditAllowed"
                                      ng-model="$ctrl.deerCensus.whiteTailDeersAdditionalInfo"
                                      rows="2"
                                      spellcheck="false"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div class="form-group">
                        <label class="control-label col-md-3 col-xs-6">
                            <span translate="club.deerCensus.form.attachment"></span>
                        </label>
                        <div class="col-xs-6">
                            <div class="dropzone"
                                  ng-dropzone
                                  dropzone="$ctrl.whiteTailDeerDropzone"
                                  dropzone-config="$ctrl.whiteTailDeerDropzoneConfig"
                                  event-handlers="$ctrl.whiteTailDeerDropzoneEventHandlers">
                                <input type="hidden" spring-csrf-cookie/>
                                <div class="dz-message" translate="harvestpermit.wizard.attachments.uploadButton"></div>
                            </div>
                            <permit-application-attachment-list attachments="$ctrl.attachments"
                                                                attachment-type="'WHITE_TAIL_DEER'"
                                                                attachment-config="$ctrl.attachmentConfig"
                                                                refresh="$ctrl.refreshAttachments()">
                            </permit-application-attachment-list>
                        </div>
                    </div>
                </div>
            </div>

            <hr>

            <div class="row">
                <div class="col-md-6 col-xs-12">
                    <div class="form-group" show-errors>
                        <label for="roeDeers" class="control-label col-xs-6">
                            <span translate="club.deerCensus.form.roeDeers"></span>
                        </label>
                        <div class="col-xs-6">
                            <div class="input-group">
                                <input type="number" name="roeDeers" id="roeDeers"
                                       min="0" max="99999" step="1"
                                       class="form-control no-spinner"
                                       ng-disabled="!$ctrl.isEditAllowed"
                                       ng-model="$ctrl.deerCensus.roeDeers"/>
                                <span class="input-group-addon" translate="global.pcs"></span>
                            </div>
                            <p class="help-block has-error"
                               ng-show="deerCensusForm.roeDeers.$invalid"
                               ng-messages="deerCensusForm.roeDeers.$error">
                                <span ng-messages-include="common/errorMessages.html"></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div class="form-group">
                        <label for="roeDeersAdditionalInfo" class="control-label col-md-3 col-xs-6">
                            <span translate="club.deerCensus.form.additionalInfo"></span>
                        </label>
                        <div class="col-xs-6">
                            <textarea name="roeDeersAdditionalInfo"
                                      id="roeDeersAdditionalInfo"
                                      class="form-control"
                                      ng-disabled="!$ctrl.isEditAllowed"
                                      ng-model="$ctrl.deerCensus.roeDeersAdditionalInfo"
                                      rows="2"
                                      spellcheck="false"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div class="form-group">
                        <label class="control-label col-md-3 col-xs-6">
                            <span translate="club.deerCensus.form.attachment"></span>
                        </label>
                        <div class="col-xs-6">
                            <div class="dropzone"
                                 ng-dropzone
                                 dropzone="$ctrl.roeDeerDropzone"
                                 dropzone-config="$ctrl.roeDeerDropzoneConfig"
                                 event-handlers="$ctrl.roeDeerDropzoneEventHandlers">
                                <input type="hidden" spring-csrf-cookie/>
                                <div class="dz-message" translate="harvestpermit.wizard.attachments.uploadButton"></div>
                            </div>
                            <permit-application-attachment-list attachments="$ctrl.attachments"
                                                                attachment-type="'ROE_DEER'"
                                                                attachment-config="$ctrl.attachmentConfig"
                                                                refresh="$ctrl.refreshAttachments()">
                            </permit-application-attachment-list>
                        </div>
                    </div>
                </div>
            </div>

            <hr>

            <div class="row">
                <div class="col-md-6 col-xs-12">
                    <div class="form-group" show-errors>
                        <label for="fallowDeers" class="control-label col-xs-6">
                            <span translate="club.deerCensus.form.fallowDeers"></span>
                        </label>
                        <div class="col-xs-6">
                            <div class="input-group">
                                <input type="number" name="fallowDeers" id="fallowDeers"
                                       min="0" max="99999" step="1"
                                       class="form-control no-spinner"
                                       ng-disabled="!$ctrl.isEditAllowed"
                                       ng-model="$ctrl.deerCensus.fallowDeers"/>
                                <span class="input-group-addon" translate="global.pcs"></span>
                            </div>
                            <p class="help-block has-error"
                               ng-show="deerCensusForm.fallowDeers.$invalid"
                               ng-messages="deerCensusForm.fallowDeers.$error">
                                <span ng-messages-include="common/errorMessages.html"></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div class="form-group">
                        <label for="fallowDeersAdditionalInfo" class="control-label col-md-3 col-xs-6">
                            <span translate="club.deerCensus.form.additionalInfo"></span>
                        </label>
                        <div class="col-xs-6">
                            <textarea name="fallowDeersAdditionalInfo"
                                      id="fallowDeersAdditionalInfo"
                                      class="form-control"
                                      ng-disabled="!$ctrl.isEditAllowed"
                                      ng-model="$ctrl.deerCensus.fallowDeersAdditionalInfo"
                                      rows="2"
                                      spellcheck="false"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div class="form-group">
                        <label class="control-label col-md-3 col-xs-6">
                            <span translate="club.deerCensus.form.attachment"></span>
                        </label>
                        <div class="col-xs-6">
                            <div class="dropzone"
                                 ng-dropzone
                                 dropzone="$ctrl.fallowDeerDropzone"
                                 dropzone-config="$ctrl.fallowDeerDropzoneConfig"
                                 event-handlers="$ctrl.fallowDeerDropzoneEventHandlers">
                                <input type="hidden" spring-csrf-cookie/>
                                <div class="dz-message" translate="harvestpermit.wizard.attachments.uploadButton"></div>
                            </div>
                            <permit-application-attachment-list attachments="$ctrl.attachments"
                                                                attachment-type="'FALLOW_DEER'"
                                                                attachment-config="$ctrl.attachmentConfig"
                                                                refresh="$ctrl.refreshAttachments()">
                            </permit-application-attachment-list>
                        </div>
                    </div>
                </div>
            </div>

            <hr>

            <div class="form-group" show-errors>
                <label for="observationDate" class="control-label col-md-3 col-xs-6">
                    <span translate="club.deerCensus.form.observationDate"></span>
                    <small class="glyphicon glyphicon-asterisk text-danger"></small>
                </label>

                <div class="col-md-3 col-xs-6">
                    <div class="input-group r-dropdown-align-right"
                         ng-controller="DatePickerController">
                        <input type="text" name="observationDate" id="observationDate"
                               class="form-control"
                               uib-datepicker-popup is-open="isDatePickerOpen"
                               ng-disabled="!$ctrl.isEditAllowed"
                               ng-model="$ctrl.deerCensus.observationDate"
                               date-between-min-max
                               max-date="$ctrl.currentDate"
                               required
                               unique-year
                               day-and-month-between-min-max
                               min-day="1"
                               min-month="1"
                               max-day="30"
                               max-month="6">
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-default" tabindex="-1"
                                    ng-click="toggleDatePopup($event)">
                                <span class="glyphicon glyphicon-calendar"></span>
                            </button>
                        </span>
                    </div>
                    <p class="help-block has-error"
                       ng-show="deerCensusForm.observationDate.$invalid"
                       ng-messages="deerCensusForm.observationDate.$error">
                        <span ng-messages-include="common/errorMessages.html"></span>
                    </p>
                </div>
            </div>
        </fieldset>
    </div>

    <div class="modal-footer">
        <button type="button"
                class="btn btn-default"
                ng-click="$ctrl.cancel()"
                translate="global.button.cancel"></button>

        <button type="button"
                class="btn btn-primary"
                ng-if="$ctrl.isEditAllowed"
                ng-click="$ctrl.submit(deerCensusForm)"
                ng-disabled="!$ctrl.isValidForFinalSubmit(deerCensusForm)"
                translate="global.button.save"></button>
    </div>
</form>