<table class="table table-condensed moose-permit-infotable-hunting">
    <thead>
    <tr class="topheader">
        <th colspan="1"></th>
        <th colspan="1">
            <r-with-tooltip content-key="club.permit.allocation.huntingFinished.top"
                            tooltip-key="club.permit.allocation.huntingFinished.topTooltip"></r-with-tooltip>
        </th>
        <th colspan="1">
            <r-with-tooltip content-key="club.permit.allocation.latestUpdate.top"
                            tooltip-key="club.permit.allocation.latestUpdate.topTooltip"></r-with-tooltip>
        </th>
        <th colspan="1">
            <r-with-tooltip content-key="club.permit.allocation.sumOfAllocated.top"
                            tooltip-key="club.permit.allocation.sumOfAllocated.topTooltip"></r-with-tooltip>
        </th>
        <th colspan="3">
            <r-with-tooltip content-key="club.permit.allocation.huntingPlan.top"
                            tooltip-key="club.permit.allocation.huntingPlan.topTooltip"></r-with-tooltip>
        </th>
        <th colspan="1">
            <r-with-tooltip content-key="club.permit.allocation.usedPermits.top"
                            tooltip-key="club.permit.allocation.usedPermits.topTooltip"></r-with-tooltip>
        </th>
        <th colspan="6">
            <r-with-tooltip content-key="club.permit.allocation.harvestedSpecimens.top"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.topTooltip"></r-with-tooltip>
        </th>
        <th colspan="2">
            <r-with-tooltip content-key="club.permit.allocation.notEdible.top"
                            tooltip-key="club.permit.allocation.notEdible.topTooltip"></r-with-tooltip>
        </th>
        <th colspan="2">
            <r-with-tooltip content-key="club.permit.allocation.remaining.top"
                            tooltip-key="club.permit.allocation.remaining.topTooltip"></r-with-tooltip>
        </th>
    </tr>
    <tr class="lowheader">
        <th translate="club.permit.allocation.partner"></th>
        <th>
            <r-with-tooltip content-key="club.permit.allocation.huntingFinished.low"
                            tooltip-key="club.permit.allocation.huntingFinished.lowTooltip"></r-with-tooltip>
        </th>
        <th>
            <r-with-tooltip content-key="club.permit.allocation.latestUpdate.low"
                            tooltip-key="club.permit.allocation.latestUpdate.lowTooltip"></r-with-tooltip>
        </th>
        <th>
            <r-with-tooltip content-key="club.permit.allocation.sumOfAllocated.low"
                            tooltip-key="club.permit.allocation.sumOfAllocated.lowTooltip"></r-with-tooltip>
        </th>
        <th>
            <r-with-tooltip content-key="club.permit.allocation.huntingPlan.au"
                            tooltip-key="club.permit.allocation.huntingPlan.auTooltip"></r-with-tooltip>
        </th>
        <th>
            <r-with-tooltip content-key="club.permit.allocation.huntingPlan.an"
                            tooltip-key="club.permit.allocation.huntingPlan.anTooltip"></r-with-tooltip>
        </th>
        <th>
            <r-with-tooltip content-key="club.permit.allocation.huntingPlan.v"
                            tooltip-key="club.permit.allocation.huntingPlan.vTooltip"></r-with-tooltip>
        </th>

        <th>
            <r-with-tooltip content-key="club.permit.allocation.usedPermits.low"
                            tooltip-key="club.permit.allocation.usedPermits.lowTooltip"></r-with-tooltip>
        </th>
        <th>
            <r-with-tooltip content-key="club.permit.allocation.harvestedSpecimens.a"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.aTooltip"></r-with-tooltip>
        </th>
        <th>
            <r-with-tooltip content-key="club.permit.allocation.harvestedSpecimens.au"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.auTooltip"></r-with-tooltip>
        </th>
        <th>
            <r-with-tooltip content-key="club.permit.allocation.harvestedSpecimens.an"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.anTooltip"></r-with-tooltip>
        </th>
        <th>
            <r-with-tooltip content-key="club.permit.allocation.harvestedSpecimens.v"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.vTooltip"></r-with-tooltip>
        </th>
        <th>
            <r-with-tooltip content-key="club.permit.allocation.harvestedSpecimens.vu"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.vuTooltip"></r-with-tooltip>
        </th>
        <th>
            <r-with-tooltip content-key="club.permit.allocation.harvestedSpecimens.vn"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.vnTooltip"></r-with-tooltip>
        </th>

        <th>
            <r-with-tooltip content-key="club.permit.allocation.notEdible.a"
                            tooltip-key="club.permit.allocation.notEdible.aTooltip"></r-with-tooltip>
        </th>
        <th>
            <r-with-tooltip content-key="club.permit.allocation.notEdible.v"
                            tooltip-key="club.permit.allocation.notEdible.vTooltip"></r-with-tooltip>
        </th>

        <th>
            <r-with-tooltip content-key="club.permit.allocation.remaining.total"
                            tooltip-key="club.permit.allocation.remaining.totalTooltip"></r-with-tooltip>
        </th>
        <th>
            <r-with-tooltip content-key="club.permit.allocation.remaining.effective"
                            tooltip-key="club.permit.allocation.remaining.effectiveTooltip"></r-with-tooltip>
        </th>
    </tr>
    </thead>
    <tbody>
    <tr class="summary">
        <td translate="club.permit.sumTitle"></td>

        <td><!-- hunting end date for summary row is empty --></td>
        <td>
            <r-with-tooltip content-val="{{::$ctrl.latestUpdate | date:'dd.MM.yyyy'}}"
                            tooltip-key="club.permit.allocation.latestUpdate.cellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::$ctrl.counter.allocatedBy('total')}}"
                            tooltip-key="club.permit.allocation.sumOfAllocated.cellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::$ctrl.counter.allocatedBy('adultMales')}}"
                            tooltip-key="club.permit.allocation.huntingPlan.auCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::$ctrl.counter.allocatedBy('adultFemales')}}"
                            tooltip-key="club.permit.allocation.huntingPlan.anCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::$ctrl.counter.allocatedBy('young')}}"
                            tooltip-key="club.permit.allocation.huntingPlan.vCellTooltip"></r-with-tooltip>
        </td>

        <td>
            <r-with-tooltip content-val="{{::$ctrl.getTotalUsedPermits() | number}}"
                            tooltip-key="club.permit.allocation.usedPermits.cellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::$ctrl.counter.harvestsBy('adult')}}"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.aCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::$ctrl.counter.harvestsBy('adultMales')}}"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.auCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::$ctrl.counter.harvestsBy('adultFemales')}}"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.anCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::$ctrl.counter.harvestsBy('young')}}"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.vCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::$ctrl.counter.harvestsBy('youngMales')}}"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.vuCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::$ctrl.counter.harvestsBy('youngFemales')}}"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.vnCellTooltip"></r-with-tooltip>
        </td>

        <td>
            <r-with-tooltip content-val="{{::$ctrl.counter.harvestsBy('adultsNotEdible')}}"
                            tooltip-key="club.permit.allocation.notEdible.aCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::$ctrl.counter.harvestsBy('youngsNotEdible')}}"
                            tooltip-key="club.permit.allocation.notEdible.vCellTooltip"></r-with-tooltip>
        </td>

        <td>
            <r-with-tooltip content-val="{{::$ctrl.counter.totalRemainingPopulationInTotalArea()}}"
                            tooltip-key="club.permit.allocation.remaining.totalCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::$ctrl.counter.totalRemainingPopulationInEffectiveArea()}}"
                            tooltip-key="club.permit.allocation.remaining.effectiveCellTooltip"></r-with-tooltip>
        </td>
    </tr>
    <tr ng-repeat="partner in ::$ctrl.partners track by partner.huntingClubId"
        ng-class="{'current-club': $ctrl.isCurrentClub({'partner': partner})}">
        <td>
            <span ng-if="::partner.summary.fromMooseDataCard"
                  class="fa fa-file-text"
                  uib-tooltip="{{ 'club.permit.allocation.fromMooseDataCard' | translate }}"
                  tooltip-popup-delay="0"
                  tooltip-placement="right">
            </span>

            <moose-permit-todo todo="::partner.todo"></moose-permit-todo>

            <a ng-if="::$ctrl.canNavigateToClub"
               name-translated="::partner.huntingClubName"
               ng-click="::$ctrl.navigateToClub({'partner': partner})"></a>

            <span ng-if="::(!$ctrl.canNavigateToClub)"
                  name-translated="::partner.huntingClubName"></span>
        </td>
        <td>
            <r-with-tooltip content-val="{{::(($ctrl.getHuntingEndDate(partner) | date:'dd.MM.yyyy') || '-')}}"
                            tooltip-key="club.permit.allocation.huntingFinished.cellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::((partner.statistics.latestUpdate | date:'dd.MM.yyyy') || '-')}}"
                            tooltip-key="club.permit.allocation.latestUpdate.cellTooltip"></r-with-tooltip>
        </td>

        <td>
            <r-with-tooltip content-val="{{::(partner.allocation.total | number)}}"
                            tooltip-key="club.permit.allocation.sumOfAllocated.cellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::partner.allocation.adultMales}}"
                            tooltip-key="club.permit.allocation.huntingPlan.auCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::partner.allocation.adultFemales}}"
                            tooltip-key="club.permit.allocation.huntingPlan.anCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::partner.allocation.young}}"
                            tooltip-key="club.permit.allocation.huntingPlan.vCellTooltip"></r-with-tooltip>
        </td>

        <td>
            <r-with-tooltip content-val="{{::($ctrl.getUsedPermits(partner) | number)}}"
                            tooltip-key="club.permit.allocation.usedPermits.cellTooltip"></r-with-tooltip>
        </td>

        <td>
            <r-with-tooltip content-val="{{::(partner.harvestCount.adultMales + partner.harvestCount.adultFemales)}}"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.aCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::partner.harvestCount.adultMales}}"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.auCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::partner.harvestCount.adultFemales}}"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.anCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::(partner.harvestCount.youngMales + partner.harvestCount.youngFemales)}}"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.vCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::partner.harvestCount.youngMales}}"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.vuCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::partner.harvestCount.youngFemales}}"
                            tooltip-key="club.permit.allocation.harvestedSpecimens.vnCellTooltip"></r-with-tooltip>
        </td>

        <td>
            <r-with-tooltip content-val="{{::partner.harvestCount.adultsNotEdible}}"
                            tooltip-key="club.permit.allocation.notEdible.aCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::partner.harvestCount.youngsNotEdible}}"
                            tooltip-key="club.permit.allocation.notEdible.vCellTooltip"></r-with-tooltip>
        </td>

        <td>
            <r-with-tooltip content-val="{{::(partner.summary.remainingPopulationInTotalArea || '-')}}"
                            tooltip-key="club.permit.allocation.remaining.totalCellTooltip"></r-with-tooltip>
        </td>
        <td>
            <r-with-tooltip content-val="{{::(partner.summary.remainingPopulationInEffectiveArea || '-')}}"
                            tooltip-key="club.permit.allocation.remaining.effectiveCellTooltip"></r-with-tooltip>
        </td>
    </tr>

    </tbody>
</table>
