<form>
    <div class="row">
        <div class="col-md-3">
            <div class="form-group">
                <label for="permitType" translate="harvestpermit.admin.permit.permitType"
                       class="control-label"></label>
                <select class="form-control"
                        id="permitType"
                        ng-model="$ctrl.searchParams.permitType"
                        ng-options="a as a.permitType for a in $ctrl.permitTypes | orderBy: ['permitType'] track by a.permitTypeCode"
                        ng-change="$ctrl.permitTypeChanged()"
                        ie10-optgroup-fix>
                    <option value="" translate="harvestreport.admin.all"></option>
                </select>
            </div>
            <div class="form-group">
                <label for="yearSearch" translate="harvestpermit.admin.permit.year"
                       class="control-label"></label>
                <input id="yearSearch" type="text" class="form-control"
                       maxlength="4"
                       ng-pattern="/^20[1-9][0-9]$/"
                       ng-model="$ctrl.searchParams.year">
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="speciesSearch" translate="harvestpermit.admin.permit.species"
                       class="control-label"></label>
                <select class="form-control"
                        id="speciesSearch"
                        ng-model="$ctrl.searchParams.speciesCode"
                        ng-options="s.code as (s.name | rI18nNameFilter) for s in $ctrl.allSpecies | orderBy:$ctrl.speciesSortProperty"
                        ie10-optgroup-fix>
                    <option value="" translate="harvestreport.admin.all"></option>
                </select>
            </div>
            <div class="form-group">
                <label for="permitNumberSearch" translate="harvestpermit.permitNumber"
                       class="control-label"></label>
                <input id="permitNumberSearch" type="text" class="form-control"
                       maxlength="18"
                       ng-model="$ctrl.searchParams.permitNumber">
                <p class="help-block" translate="harvestpermit.admin.permit.permitNumberHelp"></p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="permitStateSearch" translate="harvestpermit.admin.permit.stateTitle"
                       class="control-label"></label>
                <select class="form-control"
                        id="permitStateSearch"
                        ng-model="$ctrl.searchParams.state"
                        ng-options="a as ('harvestpermit.admin.permit.state.' + a | translate) for a in $ctrl.states"
                        ie10-optgroup-fix>
                    <option value=""></option>
                </select>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="permitValiditySearch" translate="harvestpermit.admin.permit.validityTitle"
                       class="control-label"></label>
                <select class="form-control"
                        id="permitValiditySearch"
                        ng-model="$ctrl.searchParams.validity"
                        ng-options="a as ('harvestpermit.admin.permit.validity.' + a | translate) for a in $ctrl.validity"
                        ie10-optgroup-fix>
                    <option value=""></option>
                </select>
            </div>
            <div class="form-group" ng-if="$ctrl.moderatorView">
                <label for="areaSearch" translate="organisation.organisationType.RKA"
                       class="control-label"></label>
                <select class="form-control"
                        id="areaSearch"
                        ng-model="$ctrl.searchParams.areaId"
                        ng-options="a.id as a.name for a in $ctrl.areas"
                        ie10-optgroup-fix>
                    <option value="" translate="harvestreport.admin.all"></option>
                </select>
            </div>
        </div>
    </div>

    <div class="row well well-sm">
        <div class="col-md-3">
            <div class="form-group">
                <div class="radio">
                    <label>
                        <input type="radio" name="sortingType"
                               ng-model="$ctrl.searchSort.sortingType"
                               value="NORMAL">
                        <span translate="harvestpermit.admin.permit.sort.type.NORMAL"></span>
                    </label>
                </div>
                <div class="radio">
                    <label>
                        <input type="radio" name="sortingType"
                               ng-model="$ctrl.searchSort.sortingType"
                               value="SPECIAL">
                        <span translate="harvestpermit.admin.permit.sort.type.SPECIAL"></span>
                    </label>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group" ng-if="$ctrl.searchSort.sortingType == 'NORMAL'">
                <label translate="harvestpermit.admin.permit.sort.permitNumber" class="control-label"></label>
                <div class="radio">
                    <label>
                        <input type="radio" name="permitNumberSort"
                               ng-model="$ctrl.searchSort.permitNumberSort"
                               value="ASC">
                        <span class="glyphicon glyphicon-sort-by-attributes"></span>
                        <span translate="harvestpermit.admin.permit.sort.direction.ASC"></span>
                    </label>
                </div>
                <div class="radio">
                    <label>
                        <input type="radio" name="permitNumberSort"
                               ng-model="$ctrl.searchSort.permitNumberSort"
                               value="DESC">
                        <span class="glyphicon glyphicon-sort-by-attributes-alt"></span>
                        <span translate="harvestpermit.admin.permit.sort.direction.DESC"></span>
                    </label>
                </div>
            </div>
            <div class="form-group" ng-if="$ctrl.searchSort.sortingType == 'SPECIAL'">
                <label translate="harvestpermit.admin.permit.sort.year" class="control-label"></label>
                <div class="radio">
                    <label>
                        <input type="radio" name="yearSort"
                               ng-model="$ctrl.searchSort.yearSort"
                               value="ASC">
                        <span class="glyphicon glyphicon-sort-by-attributes"></span>
                        <span translate="harvestpermit.admin.permit.sort.direction.ASC"></span>
                    </label>
                </div>
                <div class="radio">
                    <label>
                        <input type="radio" name="yearSort"
                               ng-model="$ctrl.searchSort.yearSort"
                               value="DESC">
                        <span class="glyphicon glyphicon-sort-by-attributes-alt"></span>
                        <span translate="harvestpermit.admin.permit.sort.direction.DESC"></span>
                    </label>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group" ng-if="$ctrl.searchSort.sortingType == 'SPECIAL'">
                <label translate="harvestpermit.admin.permit.sort.ordinal" class="control-label"></label>
                <div class="radio">
                    <label>
                        <input type="radio" name="ordinalSort"
                               ng-model="$ctrl.searchSort.ordinalSort"
                               value="ASC">
                        <span class="glyphicon glyphicon-sort-by-attributes"></span>
                        <span translate="harvestpermit.admin.permit.sort.direction.ASC"></span>
                    </label>
                </div>
                <div class="radio">
                    <label>
                        <input type="radio" name="ordinalSort"
                               ng-model="$ctrl.searchSort.ordinalSort"
                               value="DESC">
                        <span class="glyphicon glyphicon-sort-by-attributes-alt"></span>
                        <span translate="harvestpermit.admin.permit.sort.direction.DESC"></span>
                    </label>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <button type="button" class="btn btn-lg btn-primary btn-block"
                    ng-click="$ctrl.search()" ng-disabled="!$ctrl.canSearch()">
                <span class="glyphicon glyphicon-search"></span> &nbsp;
                <span translate="harvestreport.admin.button.search"></span>
            </button>
        </div>
    </div>

    <hr ng-show="$ctrl.permits && $ctrl.permits.length">
</form>

<search-permit-list permits="$ctrl.permits" show-open-permit="$ctrl.moderatorView"></search-permit-list>
